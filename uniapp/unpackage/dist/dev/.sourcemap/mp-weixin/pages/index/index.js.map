{"version":3,"sources":["uni-app:///main.js","webpack:////Users/eyeopen/Downloads/wte/Uniapp/pages/index/index.vue?ec34","webpack:////Users/eyeopen/Downloads/wte/Uniapp/pages/index/index.vue?49b0","webpack:////Users/eyeopen/Downloads/wte/Uniapp/pages/index/index.vue?bca7","webpack:////Users/eyeopen/Downloads/wte/Uniapp/pages/index/index.vue?bbd1","uni-app:///pages/index/index.vue","webpack:////Users/eyeopen/Downloads/wte/Uniapp/pages/index/index.vue?68c4","webpack:////Users/eyeopen/Downloads/wte/Uniapp/pages/index/index.vue?b73b"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","greeting","meal","currentDate","searchTerm","isSearching","loading","preferences","presets","recommendedDishes","showTestButton","isDragging","draggedPoint","debounceTimer","onLoad","onReady","console","methods","initializeApp","updateGreeting","updateDate","year","month","day","weekday","selectPreset","uni","title","icon","randomRecommend","healthy","difficulty","vegetarian","spicy","sweetness","handleSearch","setTimeout","clearSearch","getPreferenceLabel","fetchRecommendations","recipes","api","searchResult","dish","duration","getFallbackDishes","id","cid","name","description","cookingTime","tags","matchScore","ingredients","steps","category","scores","viewDishDetail","url","goToApiTest","getRadarColor","drawRadarChart","renderRadarChart","query","node","size","resolve","canvas","ctx","dpr","width","height","canvasWidth","canvasHeight","centerX","centerY","radius","sides","angleStep","labels","labelNames","angle","x","y","labelX","labelY","value","distance","renderRadarChartFallback","onRadarTouch","onRadarTouchMove","onRadarTouchEnd","handleRadarInteraction","updatePreferenceFromTouch","minAngleDiff","closestIndex","clearTimeout","getFirstThreeTags"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvCA;AAAA;AAAA;AAAA;AAAm0B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACgIv1B;AACA;AAAA;AAAA;AAAA,eAEA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACAC;IACAA;IACA;EACA;EACAC;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;QACAC;QACAC;QACAC;QACAC;MACA;MACA;IACA;IACAC;MACA;MACAC;MACA;MACAA;QACAC;QACAC;MACA;IACA;IACAC;MACA;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAR;MACA;MACAA;QACAC;QACAC;MACA;IACA;IACAO;MAAA;MACA;MAEA;MACAT;MAEAU;QACA;QACA;QACAV;UACAC;UACAC;QACA;MACA;IACA;IACAS;MACA;MACAX;MACA;IACA;IACAY;MACA;QACAR;QACAC;QACAC;QACAC;QACAC;MACA;MACA;IACA;IACAK;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBAAA;gBAGAnC;gBACAoC;gBAAA,KAEApC;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAEAqC;cAAA;gBAAAC;gBACA;gBACAF;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAGAC;cAAA;gBAAAD;cAAA;gBAGA;gBACAxB;gBACA;kBACAA;kBACA;kBACAA;kBACA2B;kBACA;gBACA;gBACA3B;;gBAEA;gBACA;kBAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAA;gBACAyB;;gBAEA;gBACAf;kBACAC;kBACAC;kBACAgB;gBACA;gBACA;cAAA;gBAAA;gBAEA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAC;MACA;MACA,sBACA;QACAC;QACAC;QACAC;QACAC;QACAC;QACAnB;QACAoB;QACAC;QACAC;QACAC;QACAC;QACAC;UAAA1B;UAAAC;UAAAC;UAAAC;UAAAC;QAAA;MACA,GACA;QACAY;QACAC;QACAC;QACAC;QACAC;QACAnB;QACAoB;QACAC;QACAC;QACAC;QACAC;QACAC;UAAA1B;UAAAC;UAAAC;UAAAC;UAAAC;QAAA;MACA,GACA;QACAY;QACAC;QACAC;QACAC;QACAC;QACAnB;QACAoB;QACAC;QACAC;QACAC;QACAC;QACAC;UAAA1B;UAAAC;UAAAC;UAAAC;UAAAC;QAAA;MACA,EACA;MAEA;MACA;QACA;UAAA,OACAS;YAAA;UAAA,MACAA;QAAA,EACA;MACA;MAEA;IACA;IACAc;MACA/B;QACAgC;MACA;IACA;IACAC;MACAjC;QACAgC;MACA;IACA;IACAE;MACA;QACA9B;QACAC;QACAC;QACAC;QACAC;MACA;MACA;IACA;IACA2B;MAAA;MACA;MACA;QACAzB;UACA;QACA;MACA;IACA;IAEA0B;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA9C;gBAAA;gBAGA;gBACA+C;gBAAA;gBAAA,OACA;kBACAA;oBAAAC;oBAAAC;kBAAA;oBACAC;kBACA;gBACA;cAAA;gBAJAC;gBAAA,MAMA;kBAAA;kBAAA;gBAAA;gBACAnD;gBAAA;cAAA;gBAIAoD;gBACAC,0CAEA;gBACAF;gBACAA;gBACAC;gBAEApD;kBAAAsD;kBAAAC;kBAAAF;gBAAA;;gBAEA;gBACAG;gBACAC;gBACAC;gBACAC;gBACAC;gBACAC,gDAEA;gBACAT;gBACAA;;gBAEA;gBACAA;gBACAA;;gBAEA;gBACA;kBACAA;kBACAA;kBACAA;gBACA;;gBAEA;gBACAU;gBACAC;gBACAC;kBACAlD;kBACAC;kBACAC;kBACAC;kBACAC;gBACA;gBAEAkC;gBACAA;gBACAA;gBACAA;gBACAA;gBAEA;kBACAa;kBACAC;kBACAC,wCAEA;kBACAf;kBACAA;kBACAA;kBACAA;;kBAEA;kBACAgB;kBACAC;kBACAjB;gBACA;;gBAEA;gBACAA;gBACAA;gBACAA;gBACAA;gBAEA;kBACAa;kBACAK;kBACAC;kBACAL;kBACAC;kBAEA;oBACAf;kBACA;oBACAA;kBACA;gBACA;gBAEAA;gBACAA;gBACAA;;gBAEA;gBACA;kBACAa;kBACAK;kBACAC;kBACAL;kBACAC,+CAEA;kBACAf;kBACAA;kBACAA;kBACAA;;kBAEA;kBACAA;kBACAA;kBACAA;kBACAA;;kBAEA;kBACAA;kBACAA;kBACAA;kBACAA;;kBAEA;kBACAA;kBACAA;kBACAA;kBACAA;kBACAA;kBAEAA;kBACAA;kBACAA;kBACAA;gBACA;gBAEApD;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEAwE;MACAxE;MACA;MACA;QACAA;QACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACAoD;MACAA;;MAEA;MACAA;MACAA;MAEA;QACAA;QACAA;QACAA;MACA;;MAEA;MACA;MACA;MAEAA;MACA;QACA;QACA;QACA;QAEAA;QACAA;QACAA;QACAA;MACA;;MAEA;MACAA;MACAA;MACAA;MACAA;MAEA;QACA;QACA;QACA;QACA;QACA;QAEA;UACAA;QACA;UACAA;QACA;MACA;MAEAA;MACAA;MACAA;;MAEA;MACAA;MACA;QACA;QACA;QACA;QACA;QACA;QAEAA;QACAA;QACAA;MACA;MAEAA;MACApD;IACA;IAEAyE;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;MACA;IACA;IAEAC;MAAA;MACA;MAEA;;MAEA;MACAlE;QACA;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QAEA;MACA;IACA;IAEAmE;MAAA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;;MAEA;MACA;MACA;;MAEA;MACA;MACA;MACA;;MAEA;MACA;MACA;MAEA;QACA;QACA;QACA;QAEA;UACAC;UACAC;QACA;MACA;;MAEA;MACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;UACA;UACA;;UAEA;UACAC;UACA;YACA;UACA;;UAEA;UACAtE;YACAC;YACAC;YACAgB;UACA;QACA;MACA;IACA;IAEAqD;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC7sBA;AAAA;AAAA;AAAA;AAAgrC,CAAgB,gmCAAG,EAAC,C;;;;;;;;;;;ACApsC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.searchTerm.trim()\n  var l0 = _vm.__map(_vm.preferences, function (pref, key) {\n    var $orig = _vm.__get_orig(pref)\n    var m0 = _vm.getRadarColor(key)\n    var m1 = _vm.getPreferenceLabel(key)\n    return {\n      $orig: $orig,\n      m0: m0,\n      m1: m1,\n    }\n  })\n  var l1 = !_vm.loading\n    ? _vm.__map(_vm.recommendedDishes, function (dish, index) {\n        var $orig = _vm.__get_orig(dish)\n        var g1 = dish.matchScore ? Math.round(dish.matchScore) : null\n        return {\n          $orig: $orig,\n          g1: g1,\n        }\n      })\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"container\">\n\t\t<!-- Header section -->\n\t\t<view class=\"header\">\n\t\t\t<view class=\"header-content\">\n\t\t\t\t<view class=\"greeting-section\">\n\t\t\t\t\t<text class=\"emoji\">‚ú®</text>\n\t\t\t\t\t<text class=\"greeting-text\">{{ greeting }}Ôºå{{ meal }}ÂêÉ‰ªÄ‰πàÔºü</text>\n\t\t\t\t\t<text class=\"emoji\">üçΩÔ∏è</text>\n\t\t\t\t</view>\n\t\t\t\t<!-- APIÊµãËØïÊåâÈíÆ (ÂºÄÂèëÁéØÂ¢É) -->\n\t\t\t\t<view class=\"test-api-btn\" @tap=\"goToApiTest\" v-if=\"showTestButton\">\n\t\t\t\t\t<text class=\"test-text\">üîß APIÊµãËØï</text>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"subtitle\">Ë∞ÉÊï¥‰Ω†ÁöÑÂè£Âë≥ÂÅèÂ•ΩÔºåËé∑Âèñ‰∏™ÊÄßÂåñËèúÂìÅÊé®Ëçê</text>\n\t\t\t\t<view class=\"date-info\">\n\t\t\t\t\t<text class=\"date-text\">{{ currentDate }}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"tags\">\n\t\t\t\t\t<view class=\"tag tag-ai\">ü§ñ AIÊô∫ËÉΩÊé®Ëçê</view>\n\t\t\t\t\t<view class=\"tag tag-realtime\">‚ö° ÂÆûÊó∂Êõ¥Êñ∞</view>\n\t\t\t\t\t<view class=\"tag tag-personal\">üéØ ‰∏™ÊÄßÂåñÂÆöÂà∂</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- Preset buttons section -->\n\t\t<view class=\"preset-section\">\n\t\t\t<text class=\"section-title\">üéØ Âø´ÈÄüÈ¢ÑËÆæÈÖçÁΩÆ</text>\n\t\t\t<view class=\"preset-row\">\n\t\t\t\t<view \n\t\t\t\t\tv-for=\"(preset, index) in presets\" \n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\tclass=\"preset-icon-btn\"\n\t\t\t\t\t@tap=\"selectPreset(preset)\"\n\t\t\t\t>\n\t\t\t\t\t<text class=\"preset-emoji\">{{ preset.emoji }}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"preset-icon-btn preset-random\" @tap=\"randomRecommend\">\n\t\t\t\t\t<text class=\"preset-emoji\">üé≤</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- Ingredient search section -->\n\t\t<view class=\"search-section\">\n\t\t\t<view class=\"search-row\">\n\t\t\t\t<view class=\"search-input-wrapper\">\n\t\t\t\t\t<input \n\t\t\t\t\t\tclass=\"search-input\" \n\t\t\t\t\t\tplaceholder=\"ËæìÂÖ•ÊÇ®ÊúâÁöÑÈ£üÊùê...\"\n\t\t\t\t\t\tv-model=\"searchTerm\"\n\t\t\t\t\t\t@confirm=\"handleSearch\"\n\t\t\t\t\t/>\n\t\t\t\t\t<view v-if=\"searchTerm\" class=\"clear-btn\" @tap=\"clearSearch\">‚úï</view>\n\t\t\t\t</view>\n\t\t\t\t<button class=\"search-btn\" @tap=\"handleSearch\" :disabled=\"!searchTerm.trim()\">\n\t\t\t\t\t<text v-if=\"isSearching\">üîç</text>\n\t\t\t\t\t<text v-else>üîç</text>\n\t\t\t\t</button>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- Food Radar Chart section -->\n\t\t<view class=\"radar-section\">\n\t\t\t<text class=\"section-title\">üìä Âè£Âë≥Èõ∑ËææÂõæ</text>\n\t\t\t<view class=\"radar-container\">\n\t\t\t\t<canvas \n\t\t\t\t\ttype=\"2d\"\n\t\t\t\t\tid=\"radarChart\"\n\t\t\t\t\tclass=\"radar-canvas\"\n\t\t\t\t\t:style=\"{ width: '300rpx', height: '300rpx' }\"\n\t\t\t\t\t@touchstart=\"onRadarTouch\"\n\t\t\t\t\t@touchmove=\"onRadarTouchMove\"\n\t\t\t\t\t@touchend=\"onRadarTouchEnd\"\n\t\t\t\t></canvas>\n\t\t\t\t<text class=\"debug-info\">üéØ ÊãñÊãΩÈõ∑ËææÂõæ‰∏äÁöÑÁÇπÊù•Ë∞ÉÊï¥ÂÅèÂ•ΩÂÄº (Â∑≤ÁßªÈô§ÊªëÂùóÊéßÂà∂)</text>\n\t\t\t\t<view class=\"radar-legend\">\n\t\t\t\t\t<view v-for=\"(pref, key) in preferences\" :key=\"key\" class=\"legend-item\">\n\t\t\t\t\t\t<view class=\"legend-color\" :style=\"{ backgroundColor: getRadarColor(key) }\"></view>\n\t\t\t\t\t\t<text class=\"legend-label\">{{ getPreferenceLabel(key) }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\n\t\t<!-- Recommended dishes section -->\n\t\t<view class=\"recommendations-section\">\n\t\t\t<text class=\"section-title\">üç≥ ‰∏∫ÊÇ®Êé®Ëçê</text>\n\t\t\t<view v-if=\"loading\" class=\"loading\">\n\t\t\t\t<text>Ê≠£Âú®‰∏∫ÊÇ®Êé®ËçêÁæéÈ£ü...</text>\n\t\t\t</view>\n\t\t\t<view v-else class=\"dish-grid\">\n\t\t\t\t<view \n\t\t\t\t\tv-for=\"(dish, index) in recommendedDishes\" \n\t\t\t\t\t:key=\"dish.id\"\n\t\t\t\t\tclass=\"dish-card\"\n\t\t\t\t\t@tap=\"viewDishDetail(dish)\"\n\t\t\t\t>\n\t\t\t\t\t<!-- Line 1: Title with match score -->\n\t\t\t\t\t<view class=\"dish-header\">\n\t\t\t\t\t\t<text class=\"dish-name\">{{ dish.name }}</text>\n\t\t\t\t\t\t<view v-if=\"dish.matchScore\" class=\"match-score\">\n\t\t\t\t\t\t\t<text class=\"score-text\">{{ Math.round(dish.matchScore) }}%ÂåπÈÖç</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- Line 2: Description -->\n\t\t\t\t\t<text class=\"dish-description\">{{ dish.description }}</text>\n\t\t\t\t\t\n\t\t\t\t\t<!-- Line 3: Time and Difficulty -->\n\t\t\t\t\t<view class=\"dish-meta\">\n\t\t\t\t\t\t<text class=\"meta-item\">‚è±Ô∏è {{ dish.cookingTime }}</text>\n\t\t\t\t\t\t<text class=\"meta-item\">üìä {{ dish.difficulty }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- Line 4: CID from database -->\n\t\t\t\t\t<view class=\"dish-cid\">\n\t\t\t\t\t\t<text class=\"cid-label\">{{ dish.cid || dish.category || 'Êú™ÂàÜÁ±ª' }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport api from '../../utils/api.js'\nimport { CONFIG } from '../../utils/config.js'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tgreeting: 'Êó©‰∏äÂ•Ω',\n\t\t\tmeal: 'Êó©È§ê',\n\t\t\tcurrentDate: '',\n\t\t\tsearchTerm: '',\n\t\t\tisSearching: false,\n\t\t\tloading: false,\n\t\t\tpreferences: { ...CONFIG.DEFAULT_PREFERENCES },\n\t\t\tpresets: CONFIG.PRESETS,\n\t\t\trecommendedDishes: [],\n\t\t\tshowTestButton: true, // ÂºÄÂèëÁéØÂ¢ÉÊòæÁ§∫ÊµãËØïÊåâÈíÆ\n\t\t\tisDragging: false,\n\t\t\tdraggedPoint: null,\n\t\t\tdebounceTimer: null\n\t\t}\n\t},\n\tonLoad() {\n\t\tthis.initializeApp();\n\t\tthis.fetchRecommendations();\n\t},\n\tonReady() {\n\t\tconsole.log('Page ready, drawing radar chart...');\n\t\tconsole.log('Preferences:', this.preferences);\n\t\tthis.drawRadarChart();\n\t},\n\tmethods: {\n\t\tinitializeApp() {\n\t\t\tthis.updateGreeting();\n\t\t\tthis.updateDate();\n\t\t},\n\t\tupdateGreeting() {\n\t\t\tconst hour = new Date().getHours();\n\t\t\tif (hour < 10) {\n\t\t\t\tthis.greeting = 'Êó©‰∏äÂ•Ω';\n\t\t\t\tthis.meal = 'Êó©È§ê';\n\t\t\t} else if (hour >= 10 && hour < 16) {\n\t\t\t\tthis.greeting = '‰∏≠ÂçàÂ•Ω';\n\t\t\t\tthis.meal = 'ÂçàÈ§ê';\n\t\t\t} else {\n\t\t\t\tthis.greeting = 'Êôö‰∏äÂ•Ω';\n\t\t\t\tthis.meal = 'ÊôöÈ§ê';\n\t\t\t}\n\t\t},\n\t\tupdateDate() {\n\t\t\tconst now = new Date();\n\t\t\tconst options = { \n\t\t\t\tyear: 'numeric', \n\t\t\t\tmonth: 'long', \n\t\t\t\tday: 'numeric',\n\t\t\t\tweekday: 'long'\n\t\t\t};\n\t\t\tthis.currentDate = now.toLocaleDateString('zh-CN', options);\n\t\t},\n\t\tselectPreset(preset) {\n\t\t\tthis.preferences = { ...preset.preferences };\n\t\t\tuni.removeStorageSync(CONFIG.STORAGE_KEYS.INGREDIENT_SEARCH);\n\t\t\tthis.fetchRecommendations();\n\t\t\tuni.showToast({\n\t\t\t\ttitle: `Â∑≤ÈÄâÊã©${preset.name}`,\n\t\t\t\ticon: 'success'\n\t\t\t});\n\t\t},\n\t\trandomRecommend() {\n\t\t\tthis.preferences = {\n\t\t\t\thealthy: Math.floor(Math.random() * 10) + 1,\n\t\t\t\tdifficulty: Math.floor(Math.random() * 3) + 1,\n\t\t\t\tvegetarian: Math.floor(Math.random() * 10) + 1,\n\t\t\t\tspicy: Math.floor(Math.random() * 10) + 1,\n\t\t\t\tsweetness: Math.floor(Math.random() * 10) + 1\n\t\t\t};\n\t\t\tuni.removeStorageSync(CONFIG.STORAGE_KEYS.INGREDIENT_SEARCH);\n\t\t\tthis.fetchRecommendations();\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'ÈöèÊú∫Êé®ËçêÂ∑≤ÁîüÊàê',\n\t\t\t\ticon: 'success'\n\t\t\t});\n\t\t},\n\t\thandleSearch() {\n\t\t\tif (!this.searchTerm.trim()) return;\n\t\t\t\n\t\t\tthis.isSearching = true;\n\t\t\tuni.setStorageSync(CONFIG.STORAGE_KEYS.INGREDIENT_SEARCH, this.searchTerm.trim());\n\t\t\t\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.fetchRecommendations();\n\t\t\t\tthis.isSearching = false;\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'ÊêúÁ¥¢ÂÆåÊàê',\n\t\t\t\t\ticon: 'success'\n\t\t\t\t});\n\t\t\t}, 1000);\n\t\t},\n\t\tclearSearch() {\n\t\t\tthis.searchTerm = '';\n\t\t\tuni.removeStorageSync(CONFIG.STORAGE_KEYS.INGREDIENT_SEARCH);\n\t\t\tthis.fetchRecommendations();\n\t\t},\n\t\tgetPreferenceLabel(key) {\n\t\t\tconst labels = {\n\t\t\t\thealthy: 'ü•ó ÂÅ•Â∫∑Â∫¶',\n\t\t\t\tdifficulty: 'üë®‚Äçüç≥ ÈöæÊòìÂ∫¶',\n\t\t\t\tvegetarian: 'ü•¨ Á¥†È£üÂ∫¶',\n\t\t\t\tspicy: 'üå∂Ô∏è Ëæ£Âë≥Â∫¶',\n\t\t\t\tsweetness: 'üçØ ÁîúÂë≥Â∫¶'\n\t\t\t};\n\t\t\treturn labels[key] || key;\n\t\t},\n\t\tasync fetchRecommendations() {\n\t\t\tthis.loading = true;\n\t\t\t\n\t\t\ttry {\n\t\t\t\tconst searchTerm = uni.getStorageSync(CONFIG.STORAGE_KEYS.INGREDIENT_SEARCH);\n\t\t\t\tlet recipes = [];\n\t\t\t\t\n\t\t\t\tif (searchTerm) {\n\t\t\t\t\t// Â¶ÇÊûúÊúâÊêúÁ¥¢ËØçÔºåÊåâÈ£üÊùêÊêúÁ¥¢\n\t\t\t\t\tconst searchResult = await api.searchRecipesByIngredients([searchTerm]);\n\t\t\t\t\t// Â§ÑÁêÜÈ£üÊùêÊêúÁ¥¢ÁöÑÁâπÊÆäÂìçÂ∫îÊ†ºÂºè\n\t\t\t\t\trecipes = searchResult.results || searchResult;\n\t\t\t\t} else {\n\t\t\t\t\t// Âê¶ÂàôÊ†πÊçÆÂÅèÂ•ΩÊé®Ëçê\n\t\t\t\t\trecipes = await api.getRecommendedRecipes(this.preferences);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// ËΩ¨Êç¢Êï∞ÊçÆÊ†ºÂºèÂπ∂ËÆ°ÁÆóÂåπÈÖçÂàÜÊï∞\n\t\t\t\tconsole.log('Raw API recipes:', recipes);\n\t\t\t\tthis.recommendedDishes = recipes.map(recipe => {\n\t\t\t\t\tconsole.log('Converting recipe:', recipe);\n\t\t\t\t\tconst dish = api.convertRecipeToDish(recipe);\n\t\t\t\t\tconsole.log('Converted dish:', dish);\n\t\t\t\t\tdish.matchScore = api.calculateMatchScore(dish, this.preferences);\n\t\t\t\t\treturn dish;\n\t\t\t\t});\n\t\t\t\tconsole.log('Final recommended dishes:', this.recommendedDishes);\n\t\t\t\t\n\t\t\t\t// ÊåâÂåπÈÖçÂàÜÊï∞ÊéíÂ∫è\n\t\t\t\tthis.recommendedDishes.sort((a, b) => (b.matchScore || 0) - (a.matchScore || 0));\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Ëé∑ÂèñÊé®ËçêÂ§±Ë¥•:', error);\n\t\t\t\tapi.handleApiError(error);\n\t\t\t\t\n\t\t\t\t// ÊòæÁ§∫ÈîôËØØ‰ø°ÊÅØÔºå‰∏ç‰ΩøÁî®Â§áÁî®Êï∞ÊçÆÔºåËøôÊ†∑ÂèØ‰ª•ÁúãÂà∞ÁúüÂÆûÁöÑAPIÈóÆÈ¢ò\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'APIËøûÊé•Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªú',\n\t\t\t\t\ticon: 'error',\n\t\t\t\t\tduration: 3000\n\t\t\t\t});\n\t\t\t\tthis.recommendedDishes = [];\n\t\t\t} finally {\n\t\t\t\tthis.loading = false;\n\t\t\t}\n\t\t},\n\t\tgetFallbackDishes() {\n\t\t\t// Â§áÁî®Êï∞ÊçÆÔºåÂΩìAPIÂ§±Ë¥•Êó∂‰ΩøÁî®\n\t\t\tconst fallbackDishes = [\n\t\t\t\t{\n\t\t\t\t\tid: 'fallback_1',\n\t\t\t\t\tcid: 'CID001234',\n\t\t\t\t\tname: 'Áï™ËåÑÈ∏°ËõãÈù¢',\n\t\t\t\t\tdescription: 'ÁªèÂÖ∏ÂÆ∂Â∏∏Èù¢Êù°ÔºåÈÖ∏ÁîúÂèØÂè£ÔºåËê•ÂÖª‰∏∞ÂØåÔºåËÄÅÂ∞ëÁöÜÂÆúÁöÑ‰º†ÁªüÁæéÈ£ü',\n\t\t\t\t\tcookingTime: '15ÂàÜÈíü',\n\t\t\t\t\tdifficulty: 'ÁÆÄÂçï',\n\t\t\t\t\ttags: ['Â∞èÂêÉ', 'ÂÆ∂Â∏∏Ëèú', 'Âø´ÊâãËèú', 'Ëê•ÂÖª', 'Èù¢È£ü'],\n\t\t\t\t\tmatchScore: 85,\n\t\t\t\t\tingredients: ['Áï™ËåÑ', 'È∏°Ëõã', 'Èù¢Êù°', 'Ëë±'],\n\t\t\t\t\tsteps: ['ÂáÜÂ§áÈ£üÊùê', 'ÁÇíÂà∂Áï™ËåÑÈ∏°Ëõã', 'ÁÖÆÈù¢Êù°', 'Ë∞ÉÂë≥Ë£ÖÁõò'],\n\t\t\t\t\tcategory: 'ÂÆ∂Â∏∏Ëèú',\n\t\t\t\t\tscores: { healthy: 7, difficulty: 1, vegetarian: 3, spicy: 2, sweetness: 4 }\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'fallback_2',\n\t\t\t\t\tcid: 'CID005678',\n\t\t\t\t\tname: 'ËíúËìâË•øÂÖ∞Ëä±',\n\t\t\t\t\tdescription: 'ÁÆÄÂçïÁ¥†ËèúÔºåÊ∏ÖÁàΩÂÅ•Â∫∑ÔºåÂØåÂê´Áª¥ÁîüÁ¥†CÂíåËÜ≥È£üÁ∫§Áª¥ÔºåÂè£ÊÑüËÑÜÂ´©',\n\t\t\t\t\tcookingTime: '10ÂàÜÈíü',\n\t\t\t\t\tdifficulty: 'ÁÆÄÂçï',\n\t\t\t\t\ttags: ['Á¥†È£ü', 'ÂÅ•Â∫∑', 'Âø´ÊâãËèú', 'Ëî¨Ëèú', 'Ê∏ÖÊ∑°'],\n\t\t\t\t\tmatchScore: 88,\n\t\t\t\t\tingredients: ['Ë•øÂÖ∞Ëä±', 'Â§ßËíú', 'ÁîüÊäΩ', 'Áõê'],\n\t\t\t\t\tsteps: ['Â§ÑÁêÜË•øÂÖ∞Ëä±', 'ÁàÜÁÇíËíúËìâ', '‰∏ãË•øÂÖ∞Ëä±ÁÇíÂà∂', 'Ë∞ÉÂë≥Âá∫ÈîÖ'],\n\t\t\t\t\tcategory: 'Á¥†È£ü',\n\t\t\t\t\tscores: { healthy: 9, difficulty: 1, vegetarian: 10, spicy: 1, sweetness: 2 }\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'fallback_3',\n\t\t\t\t\tcid: 'CID009876',\n\t\t\t\t\tname: 'ÂÆ´‰øùÈ∏°‰∏Å',\n\t\t\t\t\tdescription: 'ÂõõÂ∑ùÁªèÂÖ∏ËèúÂìÅÔºåÈ∏°ËÇâÂ´©ÊªëÔºåËä±ÁîüÈ¶ôËÑÜÔºåÈÖ∏ÁîúÂæÆËæ£Ôºå‰∏ãÈ•≠Á•ûÂô®',\n\t\t\t\t\tcookingTime: '25ÂàÜÈíü',\n\t\t\t\t\tdifficulty: '‰∏≠Á≠â',\n\t\t\t\t\ttags: ['Â∑ùËèú', '‰∏ãÈ•≠Ëèú', 'ÁªèÂÖ∏', 'Ëæ£Âë≥', 'Ëç§Ëèú'],\n\t\t\t\t\tmatchScore: 92,\n\t\t\t\t\tingredients: ['È∏°ËÉ∏ËÇâ', 'Ëä±ÁîüÁ±≥', 'Âπ≤Ëæ£Ê§í', 'Ëä±Ê§í'],\n\t\t\t\t\tsteps: ['ËÖåÂà∂È∏°ËÇâ', 'ÁÇ∏Ëä±ÁîüÁ±≥', 'ÁàÜÁÇíË∞ÉÂë≥', 'Ë£ÖÁõò‰∏äÊ°å'],\n\t\t\t\t\tcategory: 'Â∑ùËèú',\n\t\t\t\t\tscores: { healthy: 6, difficulty: 2, vegetarian: 2, spicy: 8, sweetness: 5 }\n\t\t\t\t}\n\t\t\t];\n\t\t\t\n\t\t\tconst searchTerm = uni.getStorageSync(CONFIG.STORAGE_KEYS.INGREDIENT_SEARCH);\n\t\t\tif (searchTerm) {\n\t\t\t\treturn fallbackDishes.filter(dish => \n\t\t\t\t\tdish.ingredients.some(ingredient => ingredient.includes(searchTerm)) ||\n\t\t\t\t\tdish.name.includes(searchTerm)\n\t\t\t\t);\n\t\t\t}\n\t\t\t\n\t\t\treturn fallbackDishes;\n\t\t},\n\t\tviewDishDetail(dish) {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/dish-detail/dish-detail?dish=${encodeURIComponent(JSON.stringify(dish))}`\n\t\t\t});\n\t\t},\n\t\tgoToApiTest() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/test-api/test-api'\n\t\t\t});\n\t\t},\n\t\tgetRadarColor(key) {\n\t\t\tconst colors = {\n\t\t\t\thealthy: '#10b981',\n\t\t\t\tdifficulty: '#f59e0b',\n\t\t\t\tvegetarian: '#84cc16',\n\t\t\t\tspicy: '#ef4444',\n\t\t\t\tsweetness: '#8b5cf6'\n\t\t\t};\n\t\t\treturn colors[key] || '#6366f1';\n\t\t},\n\t\tdrawRadarChart() {\n\t\t\t// Add a small delay to ensure canvas is ready\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.renderRadarChart();\n\t\t\t\t}, 200); // Increased delay\n\t\t\t});\n\t\t},\n\t\t\n\t\tasync renderRadarChart() {\n\t\t\tconsole.log('Starting Canvas 2D radar chart render...');\n\t\t\t\n\t\t\ttry {\n\t\t\t\t// Use Canvas 2D API (modern approach)\n\t\t\t\tconst query = uni.createSelectorQuery().in(this);\n\t\t\t\tconst canvas = await new Promise((resolve) => {\n\t\t\t\t\tquery.select('#radarChart').fields({ node: true, size: true }).exec((res) => {\n\t\t\t\t\t\tresolve(res[0]);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (!canvas || !canvas.node) {\n\t\t\t\t\tconsole.error('Failed to get canvas node');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst ctx = canvas.node.getContext('2d');\n\t\t\t\tconst dpr = uni.getSystemInfoSync().pixelRatio;\n\t\t\t\t\n\t\t\t\t// Set canvas size\n\t\t\t\tcanvas.node.width = canvas.width * dpr;\n\t\t\t\tcanvas.node.height = canvas.height * dpr;\n\t\t\t\tctx.scale(dpr, dpr);\n\t\t\t\t\n\t\t\t\tconsole.log('Canvas 2D context created successfully', { width: canvas.width, height: canvas.height, dpr });\n\t\t\t\t\n\t\t\t\t// Use proper dimensions\n\t\t\t\tconst canvasWidth = canvas.width;\n\t\t\t\tconst canvasHeight = canvas.height;\n\t\t\t\tconst centerX = canvasWidth / 2;\n\t\t\t\tconst centerY = canvasHeight / 2;\n\t\t\t\tconst radius = Math.min(canvasWidth, canvasHeight) * 0.25; // 25% of canvas size\n\t\t\t\tconst sides = Object.keys(this.preferences).length;\n\t\t\t\t\n\t\t\t\t// Clear canvas with white background\n\t\t\t\tctx.fillStyle = '#ffffff';\n\t\t\t\tctx.fillRect(0, 0, canvasWidth, canvasHeight);\n\t\t\t\t\n\t\t\t\t// Draw background grid\n\t\t\t\tctx.strokeStyle = 'rgba(99, 102, 241, 0.2)';\n\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\n\t\t\t\t// Draw concentric circles\n\t\t\t\tfor (let i = 1; i <= 5; i++) {\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.arc(centerX, centerY, (radius * i) / 5, 0, 2 * Math.PI);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Draw axis lines and labels\n\t\t\t\tconst angleStep = (2 * Math.PI) / sides;\n\t\t\t\tconst labels = Object.keys(this.preferences);\n\t\t\t\tconst labelNames = {\n\t\t\t\t\thealthy: 'ÂÅ•Â∫∑',\n\t\t\t\t\tdifficulty: 'ÈöæÂ∫¶',\n\t\t\t\t\tvegetarian: 'Á¥†È£ü',\n\t\t\t\t\tspicy: 'Ëæ£Âë≥',\n\t\t\t\t\tsweetness: 'ÁîúÂë≥'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tctx.strokeStyle = 'rgba(99, 102, 241, 0.3)';\n\t\t\t\tctx.fillStyle = '#666666';\n\t\t\t\tctx.font = '12px Arial';\n\t\t\t\tctx.textAlign = 'center';\n\t\t\t\tctx.textBaseline = 'middle';\n\t\t\t\t\n\t\t\t\tfor (let i = 0; i < sides; i++) {\n\t\t\t\t\tconst angle = i * angleStep - Math.PI / 2;\n\t\t\t\t\tconst x = centerX + Math.cos(angle) * radius;\n\t\t\t\t\tconst y = centerY + Math.sin(angle) * radius;\n\t\t\t\t\t\n\t\t\t\t\t// Draw axis line\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.moveTo(centerX, centerY);\n\t\t\t\t\tctx.lineTo(x, y);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\n\t\t\t\t\t// Draw label\n\t\t\t\t\tconst labelX = centerX + Math.cos(angle) * (radius + 20);\n\t\t\t\t\tconst labelY = centerY + Math.sin(angle) * (radius + 20);\n\t\t\t\t\tctx.fillText(labelNames[labels[i]] || labels[i], labelX, labelY);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Draw data polygon\n\t\t\t\tctx.strokeStyle = '#6366f1';\n\t\t\t\tctx.fillStyle = 'rgba(99, 102, 241, 0.3)';\n\t\t\t\tctx.lineWidth = 2;\n\t\t\t\tctx.beginPath();\n\t\t\t\t\n\t\t\t\tfor (let i = 0; i < sides; i++) {\n\t\t\t\t\tconst angle = i * angleStep - Math.PI / 2;\n\t\t\t\t\tconst value = this.preferences[labels[i]] || 1;\n\t\t\t\t\tconst distance = (radius * Math.max(1, Math.min(10, value))) / 10;\n\t\t\t\t\tconst x = centerX + Math.cos(angle) * distance;\n\t\t\t\t\tconst y = centerY + Math.sin(angle) * distance;\n\t\t\t\t\t\n\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\tctx.moveTo(x, y);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tctx.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tctx.closePath();\n\t\t\t\tctx.fill();\n\t\t\t\tctx.stroke();\n\t\t\t\t\n\t\t\t\t// Draw data points with enhanced interactivity\n\t\t\t\tfor (let i = 0; i < sides; i++) {\n\t\t\t\t\tconst angle = i * angleStep - Math.PI / 2;\n\t\t\t\t\tconst value = this.preferences[labels[i]] || 1;\n\t\t\t\t\tconst distance = (radius * Math.max(1, Math.min(10, value))) / 10;\n\t\t\t\t\tconst x = centerX + Math.cos(angle) * distance;\n\t\t\t\t\tconst y = centerY + Math.sin(angle) * distance;\n\t\t\t\t\t\n\t\t\t\t\t// Draw outer ring for better touch target\n\t\t\t\t\tctx.fillStyle = 'rgba(99, 102, 241, 0.2)';\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.arc(x, y, 8, 0, 2 * Math.PI);\n\t\t\t\t\tctx.fill();\n\t\t\t\t\t\n\t\t\t\t\t// Draw main point\n\t\t\t\t\tctx.fillStyle = '#6366f1';\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.arc(x, y, 5, 0, 2 * Math.PI);\n\t\t\t\t\tctx.fill();\n\t\t\t\t\t\n\t\t\t\t\t// Draw white center for contrast\n\t\t\t\t\tctx.fillStyle = '#ffffff';\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.arc(x, y, 2, 0, 2 * Math.PI);\n\t\t\t\t\tctx.fill();\n\t\t\t\t\t\n\t\t\t\t\t// Draw value text with background\n\t\t\t\t\tctx.fillStyle = 'rgba(255, 255, 255, 0.9)';\n\t\t\t\t\tctx.fillRect(x - 8, y - 18, 16, 12);\n\t\t\t\t\tctx.strokeStyle = '#6366f1';\n\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\tctx.strokeRect(x - 8, y - 18, 16, 12);\n\t\t\t\t\t\n\t\t\t\t\tctx.fillStyle = '#333333';\n\t\t\t\t\tctx.font = 'bold 10px Arial';\n\t\t\t\t\tctx.textAlign = 'center';\n\t\t\t\t\tctx.fillText(value.toString(), x, y - 10);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log('Canvas 2D radar chart completed successfully');\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Canvas 2D rendering failed:', error);\n\t\t\t\t// Fallback to old method if Canvas 2D is not supported\n\t\t\t\tthis.renderRadarChartFallback();\n\t\t\t}\n\t\t},\n\t\t\n\t\trenderRadarChartFallback() {\n\t\t\tconsole.log('Using fallback canvas rendering...');\n\t\t\tconst ctx = uni.createCanvasContext('radarChart', this);\n\t\t\tif (!ctx) {\n\t\t\t\tconsole.error('Failed to create fallback canvas context');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// Use conservative dimensions for fallback\n\t\t\tconst canvasSize = 300;\n\t\t\tconst centerX = 150;\n\t\t\tconst centerY = 150;\n\t\t\tconst radius = 60;\n\t\t\tconst sides = Object.keys(this.preferences).length;\n\t\t\t\n\t\t\t// Clear canvas\n\t\t\tctx.setFillStyle('#ffffff');\n\t\t\tctx.fillRect(0, 0, canvasSize, canvasSize);\n\t\t\t\n\t\t\t// Draw background grid\n\t\t\tctx.setStrokeStyle('rgba(99, 102, 241, 0.2)');\n\t\t\tctx.setLineWidth(1);\n\t\t\t\n\t\t\tfor (let i = 1; i <= 5; i++) {\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.arc(centerX, centerY, (radius * i) / 5, 0, 2 * Math.PI);\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t\t\n\t\t\t// Draw axis lines\n\t\t\tconst angleStep = (2 * Math.PI) / sides;\n\t\t\tconst labels = Object.keys(this.preferences);\n\t\t\t\n\t\t\tctx.setStrokeStyle('rgba(99, 102, 241, 0.3)');\n\t\t\tfor (let i = 0; i < sides; i++) {\n\t\t\t\tconst angle = i * angleStep - Math.PI / 2;\n\t\t\t\tconst x = centerX + Math.cos(angle) * radius;\n\t\t\t\tconst y = centerY + Math.sin(angle) * radius;\n\t\t\t\t\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(centerX, centerY);\n\t\t\t\tctx.lineTo(x, y);\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t\t\n\t\t\t// Draw data polygon\n\t\t\tctx.setStrokeStyle('#6366f1');\n\t\t\tctx.setFillStyle('rgba(99, 102, 241, 0.3)');\n\t\t\tctx.setLineWidth(2);\n\t\t\tctx.beginPath();\n\t\t\t\n\t\t\tfor (let i = 0; i < sides; i++) {\n\t\t\t\tconst angle = i * angleStep - Math.PI / 2;\n\t\t\t\tconst value = this.preferences[labels[i]] || 1;\n\t\t\t\tconst distance = (radius * Math.max(1, Math.min(10, value))) / 10;\n\t\t\t\tconst x = centerX + Math.cos(angle) * distance;\n\t\t\t\tconst y = centerY + Math.sin(angle) * distance;\n\t\t\t\t\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tctx.moveTo(x, y);\n\t\t\t\t} else {\n\t\t\t\t\tctx.lineTo(x, y);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tctx.closePath();\n\t\t\tctx.fill();\n\t\t\tctx.stroke();\n\t\t\t\n\t\t\t// Draw data points\n\t\t\tctx.setFillStyle('#6366f1');\n\t\t\tfor (let i = 0; i < sides; i++) {\n\t\t\t\tconst angle = i * angleStep - Math.PI / 2;\n\t\t\t\tconst value = this.preferences[labels[i]] || 1;\n\t\t\t\tconst distance = (radius * Math.max(1, Math.min(10, value))) / 10;\n\t\t\t\tconst x = centerX + Math.cos(angle) * distance;\n\t\t\t\tconst y = centerY + Math.sin(angle) * distance;\n\t\t\t\t\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.arc(x, y, 4, 0, 2 * Math.PI);\n\t\t\t\tctx.fill();\n\t\t\t}\n\t\t\t\n\t\t\tctx.draw(true);\n\t\t\tconsole.log('Fallback radar chart completed');\n\t\t},\n\t\t\n\t\tonRadarTouch(e) {\n\t\t\tthis.handleRadarInteraction(e);\n\t\t},\n\t\t\n\t\tonRadarTouchMove(e) {\n\t\t\tthis.handleRadarInteraction(e);\n\t\t},\n\t\t\n\t\tonRadarTouchEnd(e) {\n\t\t\tthis.isDragging = false;\n\t\t\tthis.draggedPoint = null;\n\t\t},\n\t\t\n\t\thandleRadarInteraction(e) {\n\t\t\tif (!e.touches || e.touches.length === 0) return;\n\t\t\t\n\t\t\tconst touch = e.touches[0];\n\t\t\t\n\t\t\t// Get canvas position and size\n\t\t\tuni.createSelectorQuery().in(this).select('#radarChart').boundingClientRect((rect) => {\n\t\t\t\tif (!rect) return;\n\t\t\t\t\n\t\t\t\t// Calculate relative position within canvas\n\t\t\t\tconst relativeX = touch.clientX - rect.left;\n\t\t\t\tconst relativeY = touch.clientY - rect.top;\n\t\t\t\t\n\t\t\t\t// Convert to canvas coordinates (accounting for rpx to px conversion)\n\t\t\t\tconst canvasX = (relativeX / rect.width) * 300;\n\t\t\t\tconst canvasY = (relativeY / rect.height) * 300;\n\t\t\t\t\n\t\t\t\tthis.updatePreferenceFromTouch(canvasX, canvasY);\n\t\t\t}).exec();\n\t\t},\n\t\t\n\t\tupdatePreferenceFromTouch(canvasX, canvasY) {\n\t\t\tconst centerX = 150;\n\t\t\tconst centerY = 150;\n\t\t\tconst maxRadius = 75; // Maximum radius for preferences\n\t\t\t\n\t\t\t// Calculate distance from center\n\t\t\tconst deltaX = canvasX - centerX;\n\t\t\tconst deltaY = canvasY - centerY;\n\t\t\tconst distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n\t\t\t\n\t\t\t// Calculate angle\n\t\t\tlet angle = Math.atan2(deltaY, deltaX) + Math.PI / 2;\n\t\t\tif (angle < 0) angle += 2 * Math.PI;\n\t\t\t\n\t\t\t// Determine which preference dimension this corresponds to\n\t\t\tconst sides = Object.keys(this.preferences).length;\n\t\t\tconst angleStep = (2 * Math.PI) / sides;\n\t\t\tconst labels = Object.keys(this.preferences);\n\t\t\t\n\t\t\t// Find the closest preference dimension\n\t\t\tlet closestIndex = 0;\n\t\t\tlet minAngleDiff = Math.PI;\n\t\t\t\n\t\t\tfor (let i = 0; i < sides; i++) {\n\t\t\t\tconst preferenceAngle = i * angleStep;\n\t\t\t\tlet angleDiff = Math.abs(angle - preferenceAngle);\n\t\t\t\tif (angleDiff > Math.PI) angleDiff = 2 * Math.PI - angleDiff;\n\t\t\t\t\n\t\t\t\tif (angleDiff < minAngleDiff) {\n\t\t\t\t\tminAngleDiff = angleDiff;\n\t\t\t\t\tclosestIndex = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Only update if touch is close enough to a preference axis (within 30 degrees)\n\t\t\tif (minAngleDiff < Math.PI / 6) {\n\t\t\t\tconst preferenceKey = labels[closestIndex];\n\t\t\t\t\n\t\t\t\t// Calculate new value based on distance from center\n\t\t\t\tconst clampedDistance = Math.min(distance, maxRadius);\n\t\t\t\tconst newValue = Math.max(1, Math.min(10, Math.round((clampedDistance / maxRadius) * 10)));\n\t\t\t\t\n\t\t\t\t// Update preference if it changed\n\t\t\t\tif (this.preferences[preferenceKey] !== newValue) {\n\t\t\t\t\tthis.preferences[preferenceKey] = newValue;\n\t\t\t\t\tthis.drawRadarChart();\n\t\t\t\t\t\n\t\t\t\t\t// Debounced API call\n\t\t\t\t\tclearTimeout(this.debounceTimer);\n\t\t\t\t\tthis.debounceTimer = setTimeout(() => {\n\t\t\t\t\t\tthis.fetchRecommendations();\n\t\t\t\t\t}, 500);\n\t\t\t\t\t\n\t\t\t\t\t// Show feedback\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: `${this.getPreferenceLabel(preferenceKey).split(' ')[1]}: ${newValue}`,\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tduration: 1000\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\n\t\tgetFirstThreeTags(tags) {\n\t\t\tif (!tags || !Array.isArray(tags)) return '';\n\t\t\treturn tags.slice(0, 3).join('\\r\\n');\n\t\t}\n\t}\n}\n</script>\n\n<style>\n.container {\n\tmin-height: 100vh;\n\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n\tposition: relative;\n}\n\n.header {\n\tpadding: 40rpx 30rpx;\n\ttext-align: center;\n}\n\n.header-content {\n\tbackground: rgba(255, 255, 255, 0.1);\n\tbackdrop-filter: blur(10px);\n\tborder-radius: 30rpx;\n\tpadding: 40rpx;\n}\n\n.greeting-section {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-bottom: 20rpx;\n}\n\n.emoji {\n\tfont-size: 60rpx;\n\tmargin: 0 20rpx;\n}\n\n.greeting-text {\n\tfont-size: 36rpx;\n\tfont-weight: bold;\n\tcolor: white;\n\ttext-shadow: 0 2rpx 4rpx rgba(0,0,0,0.3);\n}\n\n.subtitle {\n\tfont-size: 28rpx;\n\tcolor: rgba(255, 255, 255, 0.9);\n\tmargin-bottom: 20rpx;\n}\n\n.date-info {\n\tmargin-bottom: 30rpx;\n}\n\n.date-text {\n\tfont-size: 24rpx;\n\tcolor: rgba(255, 255, 255, 0.8);\n}\n\n.tags {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: center;\n\tgap: 20rpx;\n}\n\n.tag {\n\tpadding: 10rpx 20rpx;\n\tborder-radius: 50rpx;\n\tfont-size: 22rpx;\n\tcolor: white;\n}\n\n.tag-ai {\n\tbackground: linear-gradient(45deg, #3b82f6, #06b6d4);\n}\n\n.tag-realtime {\n\tbackground: linear-gradient(45deg, #10b981, #84cc16);\n}\n\n.tag-personal {\n\tbackground: linear-gradient(45deg, #f59e0b, #ef4444);\n}\n\n.preset-section {\n\tpadding: 0 30rpx 40rpx;\n}\n\n.section-title {\n\tdisplay: block;\n\ttext-align: center;\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: white;\n\tmargin-bottom: 30rpx;\n}\n\n.preset-row {\n\tdisplay: flex;\n\tjustify-content: space-around;\n\talign-items: center;\n\tgap: 20rpx;\n\tpadding: 0 20rpx;\n}\n\n.preset-icon-btn {\n\twidth: 80rpx;\n\theight: 80rpx;\n\tbackground: rgba(255, 255, 255, 0.15);\n\tbackdrop-filter: blur(10px);\n\tborder-radius: 50%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\ttransition: all 0.3s ease;\n}\n\n.preset-icon-btn:active {\n\ttransform: scale(0.9);\n\tbackground: rgba(255, 255, 255, 0.25);\n}\n\n.preset-emoji {\n\tfont-size: 36rpx;\n}\n\n.preset-random {\n\tbackground: linear-gradient(45deg, #8b5cf6, #6366f1);\n}\n\n.search-section {\n\tpadding: 0 30rpx 40rpx;\n}\n\n\n.search-row {\n\tdisplay: flex;\n\tgap: 20rpx;\n\talign-items: center;\n\tmargin-bottom: 20rpx;\n}\n\n.search-input-wrapper {\n\tposition: relative;\n\tflex: 1;\n}\n\n.search-input {\n\twidth: 100%;\n\tpadding: 0 25rpx;\n\tborder-radius: 50rpx;\n\tbackground: rgba(255, 255, 255, 0.9);\n\tborder: none;\n\tfont-size: 28rpx;\n\tbox-sizing: border-box;\n\theight: 68rpx;\n\tline-height: 68rpx;\n\ttext-align: left;\n}\n\n.clear-btn {\n\tposition: absolute;\n\tright: 25rpx;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n\twidth: 35rpx;\n\theight: 35rpx;\n\tborder-radius: 50%;\n\tbackground: rgba(0, 0, 0, 0.1);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 20rpx;\n\tcolor: #666;\n}\n\n.search-btn {\n\twidth: 68rpx;\n\theight: 68rpx;\n\tborder-radius: 34rpx;\n\tbackground: linear-gradient(45deg, #10b981, #059669);\n\tcolor: white;\n\tborder: none;\n\tfont-size: 26rpx;\n\tfont-weight: bold;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.search-btn[disabled] {\n\topacity: 0.5;\n}\n\n\n.radar-section {\n\tpadding: 0 30rpx 40rpx;\n}\n\n.radar-container {\n\tbackground: rgba(255, 255, 255, 0.15);\n\tbackdrop-filter: blur(10px);\n\tborder-radius: 25rpx;\n\tpadding: 30rpx;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n\n.radar-canvas {\n\twidth: 300rpx !important;\n\theight: 300rpx !important;\n\tmargin-bottom: 30rpx;\n\tbackground-color: rgba(255, 255, 255, 0.9);\n\tborder-radius: 15rpx;\n\tborder: 2rpx solid rgba(99, 102, 241, 0.2);\n\tdisplay: block;\n\tbox-sizing: border-box;\n\tcursor: pointer;\n\ttouch-action: none; /* Prevent scrolling while dragging */\n}\n\n.debug-info {\n\tfont-size: 24rpx;\n\tcolor: #666;\n\ttext-align: center;\n\tmargin-bottom: 10rpx;\n}\n\n.radar-legend {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: center;\n\tgap: 20rpx;\n}\n\n.legend-item {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 8rpx;\n}\n\n.legend-color {\n\twidth: 16rpx;\n\theight: 16rpx;\n\tborder-radius: 50%;\n}\n\n.legend-label {\n\tfont-size: 22rpx;\n\tcolor: white;\n}\n\n\n.recommendations-section {\n\tpadding: 0 30rpx 60rpx;\n}\n\n.loading {\n\ttext-align: center;\n\tpadding: 80rpx;\n\tcolor: white;\n\tfont-size: 28rpx;\n}\n\n.dish-grid {\n\tdisplay: grid;\n\tgrid-template-columns: 1fr;\n\tgap: 25rpx;\n}\n\n.dish-card {\n\tbackground: rgba(255, 255, 255, 0.15);\n\tbackdrop-filter: blur(10px);\n\tborder-radius: 25rpx;\n\tpadding: 35rpx;\n\ttransition: all 0.3s ease;\n}\n\n.dish-card:active {\n\ttransform: scale(0.98);\n\tbackground: rgba(255, 255, 255, 0.25);\n}\n\n.dish-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmargin-bottom: 15rpx;\n}\n\n.dish-name {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: white;\n}\n\n.match-score {\n\tbackground: linear-gradient(45deg, #10b981, #059669);\n\tpadding: 8rpx 16rpx;\n\tborder-radius: 20rpx;\n}\n\n.score-text {\n\tfont-size: 22rpx;\n\tcolor: white;\n\tfont-weight: bold;\n}\n\n.dish-description {\n\tfont-size: 26rpx;\n\tcolor: rgba(255, 255, 255, 0.9);\n\tmargin-bottom: 20rpx;\n\tline-height: 1.4;\n}\n\n.dish-meta {\n\tdisplay: flex;\n\tgap: 30rpx;\n\tmargin-bottom: 20rpx;\n}\n\n.meta-item {\n\tfont-size: 24rpx;\n\tcolor: rgba(255, 255, 255, 0.8);\n}\n\n.dish-cid {\n\tmargin-top: 15rpx;\n\tpadding-top: 10rpx;\n\tborder-top: 1rpx solid rgba(255, 255, 255, 0.2);\n}\n\n.cid-label {\n\tfont-size: 22rpx;\n\tcolor: rgba(255, 255, 255, 0.7);\n\tfont-family: 'Courier New', monospace;\n\tfont-weight: normal;\n}\n\n.test-api-btn {\n\tposition: absolute;\n\ttop: 20rpx;\n\tright: 20rpx;\n\tbackground: rgba(255, 255, 255, 0.2);\n\tbackdrop-filter: blur(10px);\n\tborder-radius: 15rpx;\n\tpadding: 10rpx 20rpx;\n\tborder: 2rpx solid rgba(255, 255, 255, 0.3);\n}\n\n.test-text {\n\tfont-size: 24rpx;\n\tcolor: white;\n\tfont-weight: bold;\n}\n</style>","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1755609947760\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}