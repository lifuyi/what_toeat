import{u as e,j as r,a as t,c as n}from"./index-DQsto82V.js";import{r as o,R as a,b as i,d as l,P as s,e as d,f as c,g as u}from"./recharts-hG-n--Gq.js";import{C as f,b as m,c as p,a as h}from"./card-uIgp2U30.js";import{u as b,c as g,a as v,b as x,P as y,d as w,e as j}from"./index-ovTrVQJo.js";var S=["PageUp","PageDown"],k=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],R={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},M="Slider",[N,D,C]=function(n){const o=n+"CollectionProvider",[i,l]=g(o),[s,d]=i(o,{collectionRef:{current:null},itemMap:new Map}),c=e=>{const{scope:t,children:n}=e,o=a.useRef(null),i=a.useRef(new Map).current;return r.jsx(s,{scope:t,itemMap:i,collectionRef:o,children:n})};c.displayName=o;const u=n+"CollectionSlot",f=t(u),m=a.forwardRef((t,n)=>{const{scope:o,children:a}=t,i=d(u,o),l=e(n,i.collectionRef);return r.jsx(f,{ref:l,children:a})});m.displayName=u;const p=n+"CollectionItemSlot",h="data-radix-collection-item",b=t(p),v=a.forwardRef((t,n)=>{const{scope:o,children:i,...l}=t,s=a.useRef(null),c=e(n,s),u=d(p,o);return a.useEffect(()=>(u.itemMap.set(s,{ref:s,...l}),()=>{u.itemMap.delete(s)})),r.jsx(b,{[h]:"",ref:c,children:i})});return v.displayName=p,[{Provider:c,Slot:m,ItemSlot:v},function(e){const r=d(n+"CollectionConsumer",e);return a.useCallback(()=>{const e=r.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${h}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},l]}(M),[P,A]=g(M,[C]),[E,_]=P(M),z=o.forwardRef((e,t)=>{const{name:n,min:a=0,max:i=100,step:l=1,orientation:s="horizontal",disabled:d=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[a],value:f,onValueChange:m=()=>{},onValueCommit:p=()=>{},inverted:h=!1,form:b,...g}=e,y=o.useRef(new Set),w=o.useRef(0),R="horizontal"===s?O:H,[M=[],D]=v({prop:f,defaultProp:u,onChange:e=>{var r;null==(r=[...y.current][w.current])||r.focus(),m(e)}}),C=o.useRef(M);function P(e,r,{commit:t}={commit:!1}){const n=function(e){return(String(e).split(".")[1]||"").length}(l),o=function(e,r){const t=Math.pow(10,r);return Math.round(e*t)/t}(Math.round((e-a)/l)*l+a,n),s=j(o,[a,i]);D((e=[])=>{const n=function(e=[],r,t){const n=[...e];return n[t]=r,n.sort((e,r)=>e-r)}(e,s,r);if(function(e,r){if(r>0){const t=function(e){return e.slice(0,-1).map((r,t)=>e[t+1]-r)}(e);return Math.min(...t)>=r}return!0}(n,c*l)){w.current=n.indexOf(s);const r=String(n)!==String(e);return r&&t&&p(n),r?n:e}return e})}return r.jsx(E,{scope:e.__scopeSlider,name:n,disabled:d,min:a,max:i,valueIndexToChangeRef:w,thumbs:y.current,values:M,orientation:s,form:b,children:r.jsx(N.Provider,{scope:e.__scopeSlider,children:r.jsx(N.Slot,{scope:e.__scopeSlider,children:r.jsx(R,{"aria-disabled":d,"data-disabled":d?"":void 0,...g,ref:t,onPointerDown:x(g.onPointerDown,()=>{d||(C.current=M)}),min:a,max:i,inverted:h,onSlideStart:d?void 0:function(e){const r=function(e,r){if(1===e.length)return 0;const t=e.map(e=>Math.abs(e-r)),n=Math.min(...t);return t.indexOf(n)}(M,e);P(e,r)},onSlideMove:d?void 0:function(e){P(e,w.current)},onSlideEnd:d?void 0:function(){const e=C.current[w.current];M[w.current]!==e&&p(M)},onHomeKeyDown:()=>!d&&P(a,0,{commit:!0}),onEndKeyDown:()=>!d&&P(i,M.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:r})=>{if(!d){const t=S.includes(e.key)||e.shiftKey&&k.includes(e.key)?10:1,n=w.current;P(M[n]+l*t*r,n,{commit:!0})}}})})})})});z.displayName=M;var[K,I]=P(M,{startEdge:"left",endEdge:"right",size:"width",direction:1}),O=o.forwardRef((t,n)=>{const{min:a,max:i,dir:l,inverted:s,onSlideStart:d,onSlideMove:c,onSlideEnd:u,onStepKeyDown:f,...m}=t,[p,h]=o.useState(null),b=e(n,e=>h(e)),g=o.useRef(void 0),v=w(l),x="ltr"===v,y=x&&!s||!x&&s;function j(e){const r=g.current||p.getBoundingClientRect(),t=X([0,r.width],y?[a,i]:[i,a]);return g.current=r,t(e-r.left)}return r.jsx(K,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:r.jsx(V,{dir:v,"data-orientation":"horizontal",...m,ref:b,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const r=j(e.clientX);null==d||d(r)},onSlideMove:e=>{const r=j(e.clientX);null==c||c(r)},onSlideEnd:()=>{g.current=void 0,null==u||u()},onStepKeyDown:e=>{const r=R[y?"from-left":"from-right"].includes(e.key);null==f||f({event:e,direction:r?-1:1})}})})}),H=o.forwardRef((t,n)=>{const{min:a,max:i,inverted:l,onSlideStart:s,onSlideMove:d,onSlideEnd:c,onStepKeyDown:u,...f}=t,m=o.useRef(null),p=e(n,m),h=o.useRef(void 0),b=!l;function g(e){const r=h.current||m.current.getBoundingClientRect(),t=X([0,r.height],b?[i,a]:[a,i]);return h.current=r,t(e-r.top)}return r.jsx(K,{scope:t.__scopeSlider,startEdge:b?"bottom":"top",endEdge:b?"top":"bottom",size:"height",direction:b?1:-1,children:r.jsx(V,{"data-orientation":"vertical",...f,ref:p,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const r=g(e.clientY);null==s||s(r)},onSlideMove:e=>{const r=g(e.clientY);null==d||d(r)},onSlideEnd:()=>{h.current=void 0,null==c||c()},onStepKeyDown:e=>{const r=R[b?"from-bottom":"from-top"].includes(e.key);null==u||u({event:e,direction:r?-1:1})}})})}),V=o.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:o,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:l,onEndKeyDown:s,onStepKeyDown:d,...c}=e,u=_(M,n);return r.jsx(y.span,{...c,ref:t,onKeyDown:x(e.onKeyDown,e=>{"Home"===e.key?(l(e),e.preventDefault()):"End"===e.key?(s(e),e.preventDefault()):S.concat(k).includes(e.key)&&(d(e),e.preventDefault())}),onPointerDown:x(e.onPointerDown,e=>{const r=e.target;r.setPointerCapture(e.pointerId),e.preventDefault(),u.thumbs.has(r)?r.focus():o(e)}),onPointerMove:x(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&a(e)}),onPointerUp:x(e.onPointerUp,e=>{const r=e.target;r.hasPointerCapture(e.pointerId)&&(r.releasePointerCapture(e.pointerId),i(e))})})}),$="SliderTrack",B=o.forwardRef((e,t)=>{const{__scopeSlider:n,...o}=e,a=_($,n);return r.jsx(y.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...o,ref:t})});B.displayName=$;var T="SliderRange",L=o.forwardRef((t,n)=>{const{__scopeSlider:a,...i}=t,l=_(T,a),s=I(T,a),d=o.useRef(null),c=e(n,d),u=l.values.length,f=l.values.map(e=>W(e,l.min,l.max)),m=u>1?Math.min(...f):0,p=100-Math.max(...f);return r.jsx(y.span,{"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,...i,ref:c,style:{...t.style,[s.startEdge]:m+"%",[s.endEdge]:p+"%"}})});L.displayName=T;var U="SliderThumb",q=o.forwardRef((t,n)=>{const a=D(t.__scopeSlider),[i,l]=o.useState(null),s=e(n,e=>l(e)),d=o.useMemo(()=>i?a().findIndex(e=>e.ref.current===i):-1,[a,i]);return r.jsx(F,{...t,ref:s,index:d})}),F=o.forwardRef((t,n)=>{const{__scopeSlider:a,index:i,name:l,...s}=t,d=_(U,a),c=I(U,a),[u,f]=o.useState(null),m=e(n,e=>f(e)),p=!u||(d.form||!!u.closest("form")),h=function(e){const[r,t]=o.useState(void 0);return b(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(r=>{if(!Array.isArray(r))return;if(!r.length)return;const n=r[0];let o,a;if("borderBoxSize"in n){const e=n.borderBoxSize,r=Array.isArray(e)?e[0]:e;o=r.inlineSize,a=r.blockSize}else o=e.offsetWidth,a=e.offsetHeight;t({width:o,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}t(void 0)},[e]),r}(u),g=d.values[i],v=void 0===g?0:W(g,d.min,d.max),w=function(e,r){return r>2?`Value ${e+1} of ${r}`:2===r?["Minimum","Maximum"][e]:void 0}(i,d.values.length),j=null==h?void 0:h[c.size],S=j?function(e,r,t){const n=e/2,o=X([0,50],[0,n]);return(n-o(r)*t)*t}(j,v,c.direction):0;return o.useEffect(()=>{if(u)return d.thumbs.add(u),()=>{d.thumbs.delete(u)}},[u,d.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${v}% + ${S}px)`},children:[r.jsx(N.ItemSlot,{scope:t.__scopeSlider,children:r.jsx(y.span,{role:"slider","aria-label":t["aria-label"]||w,"aria-valuemin":d.min,"aria-valuenow":g,"aria-valuemax":d.max,"aria-orientation":d.orientation,"data-orientation":d.orientation,"data-disabled":d.disabled?"":void 0,tabIndex:d.disabled?void 0:0,...s,ref:m,style:void 0===g?{display:"none"}:t.style,onFocus:x(t.onFocus,()=>{d.valueIndexToChangeRef.current=i})})}),p&&r.jsx(G,{name:l??(d.name?d.name+(d.values.length>1?"[]":""):void 0),form:d.form,value:g},i)]})});q.displayName=U;var G=o.forwardRef(({__scopeSlider:t,value:n,...a},i)=>{const l=o.useRef(null),s=e(l,i),d=function(e){const r=o.useRef({value:e,previous:e});return o.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}(n);return o.useEffect(()=>{const e=l.current;if(!e)return;const r=window.HTMLInputElement.prototype,t=Object.getOwnPropertyDescriptor(r,"value").set;if(d!==n&&t){const r=new Event("input",{bubbles:!0});t.call(e,n),e.dispatchEvent(r)}},[d,n]),r.jsx(y.input,{style:{display:"none"},...a,ref:s,defaultValue:n})});function W(e,r,t){return j(100/(t-r)*(e-r),[0,100])}function X(e,r){return t=>{if(e[0]===e[1]||r[0]===r[1])return r[0];const n=(r[1]-r[0])/(e[1]-e[0]);return r[0]+n*(t-e[0])}}G.displayName="RadioBubbleInput";var Y=z,J=B,Q=L,Z=q;function ee({className:e,defaultValue:t,value:a,min:i=0,max:l=100,...s}){const d=o.useMemo(()=>Array.isArray(a)?a:Array.isArray(t)?t:[i,l],[a,t,i,l]);return r.jsxs(Y,{"data-slot":"slider",defaultValue:t,value:a,min:i,max:l,className:n("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...s,children:[r.jsx(J,{"data-slot":"slider-track",className:n("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:r.jsx(Q,{"data-slot":"slider-range",className:n("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:d.length},(e,t)=>r.jsx(Z,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},t))]})}const re=a.memo(({preferences:e,onPreferencesChange:t})=>{const n=o.useMemo(()=>[{dimension:"健康",value:e.healthy,fullMark:10},{dimension:"简单",value:e.simple,fullMark:10},{dimension:"难度",value:e.difficulty,fullMark:10},{dimension:"快速",value:e.quick,fullMark:10},{dimension:"素食",value:e.vegetarian,fullMark:10},{dimension:"辛辣",value:e.spicy,fullMark:10}],[e]),a=o.useCallback((r,n)=>{t({...e,[r]:n[0]})},[e,t]),b=[{key:"healthy",label:"健康程度",value:e.healthy,emoji:"🥗",gradient:"from-emerald-500 to-green-400",color:"#10b981"},{key:"simple",label:"制作简单",value:e.simple,emoji:"⚡",gradient:"from-amber-500 to-yellow-400",color:"#f59e0b"},{key:"difficulty",label:"制作难度",value:e.difficulty,emoji:"🔥",gradient:"from-red-500 to-orange-400",color:"#ef4444"},{key:"quick",label:"制作速度",value:e.quick,emoji:"⏱️",gradient:"from-blue-500 to-cyan-400",color:"#3b82f6"},{key:"vegetarian",label:"素食偏好",value:e.vegetarian,emoji:"🥬",gradient:"from-lime-500 to-green-500",color:"#84cc16"},{key:"spicy",label:"辛辣程度",value:e.spicy,emoji:"🌶️",gradient:"from-rose-500 to-pink-400",color:"#f43f5e"}];return r.jsxs(f,{className:"w-full h-fit backdrop-blur-sm border-2 shadow-xl transition-all duration-300 dark:bg-gradient-to-br dark:from-gray-800/90 dark:to-slate-800/90 dark:border-gray-600 bg-gradient-to-br from-white/90 to-blue-50/90 border-blue-200",children:[r.jsx(m,{className:"pb-4",children:r.jsxs(p,{className:"text-center sm:text-left bg-clip-text text-transparent flex items-center gap-2 dark:bg-gradient-to-r dark:from-purple-400 dark:to-blue-400 bg-gradient-to-r from-purple-600 to-blue-600",children:[r.jsx("span",{className:"text-2xl animate-bounce",children:"🎛️"}),"口味偏好设置"]})}),r.jsxs(h,{className:"space-y-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 rounded-2xl blur-xl dark:bg-gradient-to-r dark:from-purple-900/20 dark:via-blue-900/20 dark:to-cyan-900/20 bg-gradient-to-r from-purple-500/10 via-blue-500/10 to-cyan-500/10"}),r.jsx("div",{className:"relative h-48 sm:h-56 lg:h-64 rounded-2xl p-4 border transition-all duration-300 dark:bg-gray-800/50 dark:border-gray-600 bg-white/50 border-blue-200",children:r.jsx(i,{width:"100%",height:"100%",children:r.jsxs(l,{data:n,margin:{top:20,right:30,bottom:20,left:30},children:[r.jsx(s,{stroke:"#e2e8f0"}),r.jsx(d,{dataKey:"dimension",tick:{fontSize:12,fill:"#64748b"},className:"text-xs sm:text-sm"}),r.jsx(c,{angle:90,domain:[0,10],tick:!1}),r.jsx(u,{name:"偏好",dataKey:"value",stroke:"url(#radarGradient)",fill:"url(#radarFill)",fillOpacity:.3,strokeWidth:3}),r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"radarGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),r.jsx("stop",{offset:"50%",stopColor:"#8b5cf6"}),r.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]}),r.jsxs("linearGradient",{id:"radarFill",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:.3}),r.jsx("stop",{offset:"50%",stopColor:"#8b5cf6",stopOpacity:.2}),r.jsx("stop",{offset:"100%",stopColor:"#06b6d4",stopOpacity:.3})]})]})]})})})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:b.map(({key:e,label:t,value:n,emoji:o,gradient:i,color:l})=>r.jsxs("div",{className:"space-y-3 p-4 rounded-xl border hover:shadow-lg transition-all duration-300 dark:bg-gradient-to-br dark:from-gray-700/80 dark:to-gray-800/80 dark:border-gray-600 dark:hover:shadow-gray-900/20 bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("label",{className:"text-sm sm:text-base flex items-center gap-2",children:[r.jsx("span",{className:"text-lg animate-pulse",children:o}),r.jsx("span",{className:"dark:text-gray-200 text-gray-700",children:t})]}),r.jsx("span",{className:`\n                  text-sm px-3 py-1 rounded-full text-white\n                  bg-gradient-to-r ${i} shadow-lg\n                `,children:n})]}),r.jsxs("div",{className:"relative",children:[r.jsx(ee,{value:[n],onValueChange:r=>a(e,r),max:10,min:0,step:1,className:"w-full",style:{"--slider-primary":l}}),r.jsx("div",{className:`absolute top-2 left-0 h-2 bg-gradient-to-r ${i} rounded-full transition-all duration-300`,style:{width:n/10*100+"%"}})]})]},e))})]})]})});export{re as RadarController};
